## 概念

闲置相关API有

操作的资源主要有：

- /mall/textbook/{isbn}
- /mall/goods 创建、列出商品
- /mall/goods/{goodsId} 查看、修改、删除商品



### [GET] /mall/textbook/*{isbn}*

查询教材目录中的教材

#### 权限

已登录用户

#### 参数

| 参数 | 类型   | 必填 | 释义   | 合法值         |
| ---- | ------ | ---- | ------ | -------------- |
| isbn | string | 是   | ISBN号 | 10或13位ISBN号 |

#### 响应示例

``` json
{
  "code": 0,
  "data": {
    "isbn": "9787040464825",
    "title": "大学体育·民族传统体育类",
    "subTitle": null,
    "press": "高等教育出版社",
    "author": "文烨总主编",
    "translator": null,
    "price": 14.5,
    "edition": "1版",
    "editionDate": "2016年9月",
    "page": 245,
    "tag": "体育学"
  }
}
```



### [GET] /mall/sorts

列出平台上的商品分类。

注意，该接口返回的商品分类是排序后的，请不要使用 `id` 作为分类排序的依据。这样，就可以动态地调整一些分类在界面上显示的位置。

#### 权限

已登录用户

#### 参数

无

#### 响应示例

``` json
{
  "code": 0,
  "data": [
    {
      "id": 1,
      "title": "图书"
    },
    {
      "id": 2,
      "title": "电子产品"
    }, /* ... */
    {
      "id": 7,
      "title": "虚拟类"
    },
    {
      "id": 8,
      "title": "其他"
    }
  ]
}

```

### [GET] /mall/goods

列出平台上的商品

#### 权限

已登录用户

#### 参数

| 参数  | 类型 | 必填 | 释义             | 合法值                                 |
| ----- | ---- | ---- | ---------------- | -------------------------------------- |
| sort  | int  | 否   | 分类，不填为全部 | 见“[枚举分类](#[GET] /mall/sorts)”接口 |
| index | int  | 否   | 分页的页号       |                                        |
| count | int  | 否   | 每页显示数量     |                                        |

#### 响应示例

``` json
{
  "code": 0,
  "data": [
    {
      "id": 2,
      "title": "测试商品2",
      "coverImage": "https://",
      "tags": [],
      "price": 12.0,
      "status": 1
    }
  ]
}
```

### [POST] /mall/goods

发布新的二手商品

#### 权限

已登录用户

#### 参数

参数使用 JSON 格式传递。

商品分类ID（sort） 可以通过 [获取商品分类接口](#[GET] /mall/sorts) 找到。

| 参数        | 类型     | 必填 | 释义                     | 合法值            |
| ----------- | -------- | ---- | ------------------------ | ----------------- |
| title       | string   | 是   | 商品名                   | 不超过40字符      |
| description | string   | 是   | 商品描述                 | 不超过 200 字符   |
| coverImage  | string   | 是   | 商品的封面图             | URL               |
| campus      | string   | 是   | 校区                     | 奉贤校区/徐汇校区 |
| images      | string[] | 否   | 商品的详细图片           |                   |
| tags        | string[] | 否   | 标签，如“全新”、“可议价” |                   |
| price       | float    | 是   | 价格                     |                   |
| sort        | int      | 是   | 商品分类ID               |                   |
| features    | map      | 否   | 商品属性                 |                   |
|             |          |      |                          |                   |

#### 响应示例

``` json
{
  "code": 0,
  "data": [
    {
      "id": 2,
    }
  ]
}
```



## 错误代码

| 代码 | 描述                   | 内部解释         |
| ---- | ---------------------- | ---------------- |
| 220  | 教材信息库中无对应教材 | `NoSuchTextBook` |
| 221  | ISBN 格式错误          | `InvalidISBN`    |
| 222  | 找不到该商品           | `NoSuchGoods`    |
